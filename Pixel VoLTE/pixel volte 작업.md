안녕하세요.



Pixel 3a VoLTE(KT) 작업을 근 1년 넘게 미루어 오다 이번에 진행했네요. 그간 VoLTE 작업을 미루어 왔던 이유는 3g 통화가 썩 나쁘지 않았던 것도 있고, 순정 상태의 폰을 선호해서 기기에 손대는 것이 꺼려졌던 것도 컸었던 것 같네요. 해서 빈번하게 VoLTE 글들이 올라왔지만 내용이 긴 것도 있고 쓱 훑어보고 말아왔는데, 이번에 시간이 좀 생겨 누리로님 외 다른 글들을 읽다 보니 제가 갖고 있던 오해와 편견들이 일부 있었던 것을 깨달을 수 있었네요.

**" VoLTE 작업 후에 순정 상태로 유지 가능 "**

전반적인 프로세스를 간단하게 한줄로 요약해 보자면 "핸드폰 내 설정 값들을 수정" 하는 과정이며, 그렇게 복잡한 과정은 아닌 만큼 여러 분들께서 시도해 보셔도 무방할 것 같습니다.

첫 작업이다 보니 2~3시간 정도 소요되었던 것 같은데 후기 및 기존의 내용들을 복기하고 쉽게 풀어보자는 취지에서 이 글을 남깁니다. 참고로 제 백그라운드는 현업에서 python 활용한 데이터 분석(를 하고 싶으나 실제로는 엑셀과 지내는 시간이 훨씬 많은) 업무를 하는 기술과 비기술 중간 어디 즈음에 있다보니, 프로그래밍이 생소하신 분들께 좀더 직관적으로 설명할 수 있지 않을까 싶습니다.

본문으로 들어가기 전에 본 프로세스를 정립해 주신 **누리로**님, 깃허브의 **gheron772**님께 말로 다 못할 감사를 드리며, 혹시 제가 잘못 이해/설명하고 있는 내용이 있다면 편하게 댓글 남겨주세요. 



## 1.  전체 프로세스에 대한 이해

바로 작업 내용으로 넘어가보려 하였으나, 벽돌/무한부팅에 대한 막연한 두려움을 갖고 계실 많은 분들을 위해 최대한 직관적으로 전체 프로세스를 요약해서 설명드려보려 합니다.

사실 윈도우를 안쓴다 뿐이지 스마트폰은 충분히 컴퓨터의 역할을 하고 있습니다. 다만 그 자유도에 있어 스마트폰의 편집/통제 권한은 집에서 사용하는 데스크탑에 비해 현저히 떨어지죠. 그래서 저희는 우선 스마트폰에 대한 개발자 권한을 획득하고 컴퓨터와 연결하려 합니다. 그리고 부트로더 언락을 통해 좀더 중요한, 예를 들면 부팅 파일과 같은 영역에 손댈 수 있는 기반을 마련해야겠죠. 이 단계 까지 스마트폰은 순정 상태입니다.

그 다음은 루팅이 필요합니다. 루팅은 부트로더 언락을 통해 획득한 권한으로 Magisk를 설치하는 과정이라 볼 수 있습니다. 그리곤 Magisk를 통해 모뎀 설정을 업데이트 하는 것이죠. 따라서 이후에는 순정으로 돌아가도 전혀 VoLTE 사용에 문제가 없습니다. 물론 공식 업데이트에 모뎀관련 내용이 있다면 초기화 되겠지만, 그때는 다시 "루팅>설정 업데이트>순정화" 과정을 반복하면 될겁니다. (누군가 능력자 분께서... ㅎ)

안타깝게도 KT와 U+에서는 추가 작업이 필요했습니다. 추정하기로는 통신사의 VoLTE 서버에서 모뎀의 특정 설정값을 체크하는 것으로 보이는데, 따라서 모뎀의 설정값도 수정할 필요가 있습니다. 이 때에는 컴퓨터로 스마트폰에 연결한다기 보다는 스마트폰의 모뎀에 파티션에 연결한다는 개념이다보니, 위 과정과는 조금 다르게 진행이 되겠습니다.

본격적으로 진행해 보겠습니다만, 상세한 내용은 누리로님 포스팅과 병행해 주세요.



## 2. 부트로더 언락

- Overview

> 한차례 기기의 **공장 초기화**가 필요 (이후 시스템 업데이트 시 매번 공장 초기화가 요구되는 것은 아님)
>
> 부트로더를 언락하게 되면, booting을 loading하는 기능에 대한 통제 권한을 넘겨 받음
>
> 부트로더 언락은 루팅과 다르며, 순정 상태로 계속 사용할 수 있음 (몇몇 예외사항 제외)

- 필요한 파일

  ```shell
  - adb.exe # SDK
  - AdbWinApi.dll # SDK
  - AdbWinUsbApi.dll # SDK
  - fastboot.exe # SDK
  - boot.img # 팩토리 이미지
  ```

- 언락 과정

  ``` shell
  cd /d D:\crosshatch-volte
  adb devices
  # 'unauthorized' 대신 'device'가 써 있으면 USB 디버깅 상태로 연결 확인
  ```

  연결 확인

  ```shell
  adb reboot bootloader
  fastboot reboot 
  ```

  기기를 시스템으로 재부팅

  ```shell
  adb reboot bootloader
  fastboot flashing unlock
  #기기 언락
  ```

  이후에는 스마트폰에서 조작

## 2. OMD 모델명 변경

타이핑이 불필요한 과정입니다!

고객센터에 전화 걸어주시고 2가지만 상담원께 요청해 주세요.

1) VoLTE가 되는 모델명으로 OMD 모델명을 변경해주세요 (IMEI 번호 준비)

2) Wi-Fi 맥 주소 등록해 주세요 (Mac 주소 준비)

우리가 갖고 있는 픽셀폰은 통신사에서 사전에 기기 정보를 보유하고 있지 않고, 전산 상 VoLTE가 지원되지 않습니다. 1번 과정을 통해 기기 정보를 통신사에 등록하여 VoLTE를 사용할 수 있는 모델명으로 변경할 수 있습니다. 이후 통신사를 변경하더라도 기기 정보는 남기 때문에 **한번만** 시간 내서 고객센터로 문의 주세요. 2번 과정은 통신사에서 제공하는 무료 와이파이를 사용하기 위함으로 알고 있습니다.

끝

## 3. Magisk로 루팅

> - 

## 4. VoLTE 모듈 설치 (모뎀 설정 수정)

> - 

## 5.KT/U+의 경우 VoLTE 서버에서 체크하는(추정) 설정값(`user_agent_template`) 변경

> - 

```
test code
adb ookd
```





참조.

https://cafe.naver.com/refurbishfactory/174289

https://cafe.naver.com/grnf/328846

https://cafe.naver.com/grnf/328815

https://github.com/gheron772/Pixel3aVoLTE